# This is the default test suite
- name: Extract Audio
  tool: extract_audio.xml
  inputs:
    input_av: video.m4v
  outputs:
    audio_extracted:
      - {test: ffprobe, path: "streams/stream[1]", attrib: 'codec_name', value: "pcm_s16le"}
      - {test: ffprobe, path: "streams/stream[1]", attrib: 'sample_rate', value: "44100"}
      - {test: ffprobe, path: "streams/stream[1]", attrib: 'channels', value: "1"}
      - {test: ffprobe, path: "format", attrib: "format_name", value: "wav"}
  params:    
    rate: 44100
    channels: 1
    sample_size: pcm_s16le


- name: Remove Trailing Silence
  tool: remove_trailing_silence.xml
  inputs:
    input_av: audio.mp3
  outputs:
    audio_trimed:
      - {test: ffprobe, path: "format", attrib: "format_name", value: "wav"}
      - {test: ffprobe, path: "format", attrib: "duration", value: "42.994875"}
    

- name: Tesseract
  tool: tesseract.xml
  inputs:
    input_video: video.m4v
  outputs:
    amp_vocr:
      - {test: magic, mime: text/plain}
      - {test: size, size: 61388}      
      - {test: strings, strings: ["TRUE", "STORIES", "VIRGIL"]}


- name: VOCR to CSV
  tool: vocr_to_csv.xml
  skip: true
  inputs:
    amp_vocr: vocr.json
  outputs:
    amp_vocr_csv:
      - {test: magic, mime: text/plain}
      - {test: size, size: 1024}