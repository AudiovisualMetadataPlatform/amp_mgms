Bootstrap: docker
From: fedora:34

%files
azure_shot_detection.py
pyscenedetect.py
../amp_schema/shot_detection.py /shot_detection.py
../amp_util/mgm_utils.py  /mgm_utils.py
../amp_util/mgm_logger.py /mgm_logger.py

%post
yum install -y python3 pip
pip install scenedetect[opencv-headless]
yum clean all

%runscript

script=`basename ${1:-unspecified}`
if [ ! -e /$script ]; then
    echo "Script '$script' doesn't exist in the container"
    echo "Known scripts:"
    ls -al /*.py
    exit 128
fi
shift
/$script "$@"

