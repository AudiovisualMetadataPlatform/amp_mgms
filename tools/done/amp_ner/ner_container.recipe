Bootstrap: docker
From: fedora:34

%files
aws_comprehend.py
ner_helper.py
ner_to_csv_.py
spacy_.py
../amp_schema/entity_extraction.py /entity_extraction.py
../amp_schema/speech_to_text.py /speech_to_text.py
../amp_util/mgm_utils.py  /mgm_utils.py
../amp_util/mgm_logger.py /mgm_logger.py

%post
yum install -y python3 pip
pip install boto3 spacy
yum clean all

%runscript

script=`basename ${1:-unspecified}`
if [ ! -e /$script ]; then
    echo "Script '$script' doesn't exist in the container"
    echo "Known scripts:"
    ls -al /*.py
    exit 128
fi
shift
/$script "$@"

