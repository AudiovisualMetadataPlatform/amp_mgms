Bootstrap: docker
From: ubuntu:20.04

%files
dlib_face_recognition.py
dlib_face_training.py
../amp_util/mgm_logger.py
../amp_util/mgm_utils.py
../amp_schema/facial_recognition.py

%post
apt-get update -y
apt-get install -y python3 pip
DEBIAN_FRONTEND=noninteractive apt-get install -y build-essential cmake pkg-config libx11-dev libatlas-base-dev libgtk-3-dev libboost-python-dev python3-dev
pip install numpy dlib opencv-python face_recognition
# clean up build packages and cache
apt-get autoremove -y build-essential cmake pkg-config libx11-dev libatlas-base-dev libgtk-3-dev libboost-python-dev python3-dev
apt-get clean

%runscript
/dlib_face_recognition.py "$@"

